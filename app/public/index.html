<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Subber</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <img src="videosubber.png" alt="Video Subber Logo" class="logo">
  </header>

	<form id="uploadForm">
		<div class="custom-file">
			<button type="button" id="videoFileButton" class="filepicker">Choose Video</button>
			<input type="file" id="videoFile" class="file-input" accept="video/*" required>
			<span id="videoFileName" class="file-name">No file selected</span>
		</div>

		<div class="custom-file">
			<button type="button" id="srtFileButton" class="filepicker">Choose Subtitle</button>
			<input type="file" id="srtFile" class="file-input" accept=".srt,.vtt" required>
			<span id="srtFileName" class="file-name">No file selected</span>
		</div>


		<!-- Live Preview Image (Generated by FFmpeg) -->
		<div id="previewContainer">
			<img id="subtitlePreview" src="" alt="Subtitle Preview">
		</div>

		<!-- Font Family, Size, Color -->
		<div class="label-input">
			<label>Font:</label> 
			<button type="button" id="boldButton" class="toggle-btn">B</button>
			<button type="button" id="italicButton" class="toggle-btn">I</button>
			<select id="fontFamily" class="dropdown"></select> 
			<input type="hidden" id="bold" value="-1">
			<input type="hidden" id="italic" value="0">

			<input type="range" id="fontSizeRange" min="60" max="200" value="120" class="slider">
			<input type="number" id="fontSize" min="60" max="200" value="120" class="number-input">
			<input type="color" id="fontColor" class="color-picker">
		</div>

		<!-- Outline and Shadow -->
		<div class="label-input">
			<label>Outline:</label> 
			<select id="borderStyle" class="dropdown">
				<option value="1" selected>Outline</option>
				<option value="3">Opaque Box</option>
			</select>
			<input type="range" id="outlineRange" min="0" max="20" value="5" class="slider">
			<input type="number" id="outline" min="0" max="20" value="5" class="number-input">
			<input type="color" id="outlineColor" class="color-picker">
		</div>

		<div class="label-input"><label>Drop Shadow:</label> 
			<input type="range" id="shadowRange" min="0" max="16" value="0" class="slider">
			<input type="number" id="shadow" min="0" max="16" value="0" class="number-input">
			<input type="color" id="backgroundColor" class="color-picker">
		</div>

		<div class="label-input"><label>Highlighted Word:</label> <input type="color" id="secondaryColor" class="color-picker"></div>

		<div class="label-input">
			<label>Placement:</label>
			<div id="placementGrid" class="grid-container">
				<button type="button" class="grid-btn" data-value="7"></button>
				<button type="button" class="grid-btn" data-value="8"></button>
				<button type="button" class="grid-btn" data-value="9"></button>
				<button type="button" class="grid-btn" data-value="4"></button>
				<button type="button" class="grid-btn" data-value="5"></button>
				<button type="button" class="grid-btn" data-value="6"></button>
				<button type="button" class="grid-btn" data-value="1"></button>
				<button type="button" class="grid-btn active" data-value="2"></button> <!-- default bottom middle -->
				<button type="button" class="grid-btn" data-value="3"></button>
			</div>
			<input type="hidden" id="placement" value="2">
		</div>

		<div class="label-input">
			<label>Animation:</label>
			<button type="button" id="highlightButton" class="big-toggle-btn">Highlight</button>
			<input type="hidden" id="highlightEnabled" value="1"> <!-- 1 = Karaoke On, 0 = Off -->

			<button type="button" id="fadeButton" class="big-toggle-btn">Fade In/Out</button>
			<input type="hidden" id="fadeEnabled" value="100"> <!-- 100ms = Fade On, 0ms = Fade Off -->
		</div>

		<!-- Other Settings you probably don't want to mess with. -->
		<button type="button" id="advancedToggle" class="accordion-btn">Advanced Settings â–¼</button>
		<div id="advancedSettings" class="accordion-content">
			<div class="label-input">
				<label>Character Spacing:</label> 
				<input type="range" id="spacingRange" min="0" max="20" value="0" class="slider">
				<input type="number" id="spacing" min="0" max="20" value="0" class="number-input">
			</div>
			<div class="label-input">
			<label>Rotation:</label> 
				<input type="range" id="angleRange" min="0" max="360" value="0" class="slider">
				<input type="number" id="angle" min="0" max="360" value="0" class="number-input">
			</div>
			<div class="label-input">
				<label>Margins:</label>
				<p>Left:</p>
				<input type="number" id="marginL" placeholder="10" class="number-input">
				<p>Right:</p>
				<input type="number" id="marginR" placeholder="10" class="number-input">
				<p>Vertical:</p>
				<input type="number" id="marginV" placeholder="10" class="number-input">
			</div>
		</div>
		
		<button type="submit" class="submit">Generate Video</button>
	</form>

    <p id="status"></p>

	<!-- Hidden Canvas for Font Size Normalization -->
	<canvas id="fontCanvas"></canvas>
	
	<script src="client.js"></script>
</body>
</html>
